const defaultOptions={baseClassPrefix:"wmx",openClass:"open",itemAttributes:["class","disabled"],onInit:t=>{},onSelect:t=>{}};class WmxSelect{constructor(t){return this.options={...defaultOptions,...t},this.options.element?this.element=this.options.element:this.element=document.querySelector("select"),this.element&&(this.id=this.options.baseClassPrefix+"-"+(this.element.id||+(Math.random()+1).toString(36).substring(7)),this.buildHtml()),this}buildHtml(){this.container=document.createElement("div"),this.container.classList.add(this.options.baseClassPrefix+"-select"),this.container.id=this.id,this.button=document.createElement("button"),this.button.classList.add(this.options.baseClassPrefix+"-button"),this.button.innerText=this.getSelectedText(),this.button.addEventListener("click",this.toggleOpenEvent);var t=document.createElement("div"),e=(t.classList.add(this.options.baseClassPrefix+"-buttonWrap"),t.append(this.button),this.dropdown=document.createElement("ul"),this.dropdown.classList.add(this.options.baseClassPrefix+"-dropdown"),this.dropdown.addEventListener("click",this.clickOptionEvent),document.createElement("div"));e.classList.add(this.options.baseClassPrefix+"-dropdownWrap"),e.append(this.dropdown),this.renderDropdownOptions(),this.element.before(this.container),this.container.append(t),this.container.append(e),this.container.append(this.element),document.addEventListener("click",t=>{this.container.contains(t.target)||this.container.classList.remove(this.options.openClass)}),this.element.addEventListener("change",this.changeEvent),this.options.onInit(this)}close(){this.container.classList.remove(this.options.openClass)}toggleOpenEvent=t=>{t.preventDefault(),this.toggleOpen()};toggleOpen(){this.container.classList.toggle(this.options.openClass)}changeEvent=()=>{var t=this.button.querySelector("svg");this.button.innerText=this.getSelectedText(),t&&this.button.append(t),this.renderDropdownOptions(),this.element.dispatchEvent(new Event("wmx:change")),this.options.onSelect(this)};clickOptionEvent=t=>{var e=t["target"];"LI"===e.tagName&&(t.preventDefault(),this.element.value=e.getAttribute("data-value")||"",this.getSelectedElement().setAttribute("selected","selected"),this.changeEvent()),this.close()};renderDropdownOptions(){this.dropdown.innerHTML="";this.getSelectOptions().forEach(e=>{const s=document.createElement("li");s.setAttribute("data-value",e.value),s.innerText=e.innerText,this.options.itemAttributes.forEach(t=>{e.hasAttribute(t)&&s.setAttribute(t,e.getAttribute(t))}),e==this.getSelectedElement()&&(s.classList.add(this.options.baseClassPrefix+"-selected"),s.setAttribute("selected","selected","selected")),this.dropdown.append(s)})}getSelectOptions(){return this.element.querySelectorAll("option")}getSelectedElement(){const e=this.element.value;return Array.from(this.getSelectOptions()).filter(t=>t.value==e).shift()}getSelectedText(){return void 0!==this.getSelectedElement()?this.getSelectedElement().innerText:"-"}}